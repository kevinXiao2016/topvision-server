<?xml version="1.0" encoding="UTF-8" ?><!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"><mapper namespace="com.topvision.ems.cmc.perf.domain.CmcPerfGraph"><!-- 	<typeAlias alias="cmcChannelBasic"		type="com.topvision.ems.cmc.domain.CmcChannelBasic" />	<typeAlias alias="point" 		type="com.topvision.platform.util.highcharts.domain.Point" />	<typeAlias alias="cmcPowerTemp" 		type="com.topvision.ems.cmc.performance.facade.CmcTempQualityFor8800B" /> -->		<select id="getUpChannelBasicList" parameterType="long"        resultType="cmcChannelBasic">        SELECT A.channelId, A.cmcId entityId, A.channelIndex,B.ifAdminStatus channelStatus        FROM cmcupchannelbaseinfo A LEFT JOIN  cmcportattribute B ON A.cmcId=B.cmcId AND A.channelIndex=B.ifIndex		WHERE A.cmcId = #{entityId}     </select>        <select id="getDownChannelBasicList" parameterType="long"        resultType="cmcChannelBasic">		SELECT A.docsIfDownChannelId channelId, A.cmcId entityId, A.channelIndex, B.ifAdminStatus channelStatus        FROM cmcdownchannelbaseinfo  A LEFT JOIN  cmcportattribute B ON A.cmcId=B.cmcId AND A.channelIndex=B.ifIndex		WHERE A.cmcId = #{entityId}     </select>        <select id="getCmcCpuUsedPerfPoints" parameterType="map"        resultType="com.topvision.platform.util.highcharts.domain.Point">        select         IFNULL(collectValue,-1) y,		collectTime xTime		from perfcmccpuquality   		where cmcId = #{entityId}  		and <![CDATA[ collectTime >= #{startTime} ]]> and <![CDATA[ collectTime <= #{endTime} ]]>  		order by xTime    </select>        <select id="getCmcMemUsedPerfPoints" parameterType="map"        resultType="com.topvision.platform.util.highcharts.domain.Point">        select         IFNULL(collectValue,-1) y,		collectTime xTime		from perfcmcmemquality   		where cmcId = #{entityId}  		and <![CDATA[ collectTime >= #{startTime} ]]> and <![CDATA[ collectTime <= #{endTime} ]]>  		order by xTime    </select>        <select id="getCmcFlashUsedPerfPoints" parameterType="map"        resultType="com.topvision.platform.util.highcharts.domain.Point">        select         IFNULL(collectValue,-1) y,		collectTime xTime		from perfcmcflashquality   		where cmcId = #{entityId}  		and <![CDATA[ collectTime >= #{startTime} ]]> and <![CDATA[ collectTime <= #{endTime} ]]>  		order by xTime    </select>        <select id="getCmcSignalQualityPoints" parameterType="map"        resultType="com.topvision.platform.util.highcharts.domain.Point">        select         targetValue y,		collectTime xTime		from perfcmcsignalquality   		where targetName = concat(#{perfTarget}, 'Rate')  and cmcId = #{entityId} and channelIndex = #{channelIndex}  		and <![CDATA[ collectTime >= #{startTime} ]]> and <![CDATA[ collectTime <= #{endTime} ]]>  		order by xTime    </select>         <select id="getCmcSignalSNRPoints" parameterType="map"        resultType="com.topvision.platform.util.highcharts.domain.Point">        select         collectValue y,		collectTime xTime		from perfcmcsnrquality   		where cmcId = #{entityId} and channelIndex = #{channelIndex}  		and <![CDATA[ collectTime >= #{startTime} ]]> and <![CDATA[ collectTime <= #{endTime} ]]>  		order by xTime    </select>        <select id="getCmcCcerPerfPoints" parameterType="map"        resultType="com.topvision.platform.util.highcharts.domain.Point">        select         ccerCode tipStr,        ccerRate y,		collectTime xTime		from perfcmcerrorcodequality   		where cmcId = #{entityId} and channelIndex = #{channelIndex}  		and <![CDATA[ collectTime >= #{startTime} ]]> and <![CDATA[ collectTime <= #{endTime} ]]>  		order by xTime    </select>        <select id="getCmcUcerPerfPoints" parameterType="map"        resultType="com.topvision.platform.util.highcharts.domain.Point">        select         ucerCode tipStr,        ucerRate y,		collectTime xTime		from perfcmcerrorcodequality   		where cmcId = #{entityId} and channelIndex = #{channelIndex}  		and <![CDATA[ collectTime >= #{startTime} ]]> and <![CDATA[ collectTime <= #{endTime} ]]>  		order by xTime    </select>         <select id="getCmcChannelTotalCmNumberPoints" parameterType="map"        resultType="com.topvision.platform.util.highcharts.domain.Point">        select         topCcmtsCmNumTotal y,		collectTime xTime		from perfcmccmnumberquality   		where cmcId = #{entityId} and channelIndex = #{channelIndex}  		and <![CDATA[ collectTime >= #{startTime} ]]> and <![CDATA[ collectTime <= #{endTime} ]]>  		order by xTime    </select>        <select id="getCmcChannelOnlineCmNumberPoints" parameterType="map"        resultType="com.topvision.platform.util.highcharts.domain.Point">        select         topCcmtsCmNumOnline y,		collectTime xTime		from perfcmccmnumberquality   		where cmcId = #{entityId} and channelIndex = #{channelIndex}  		and <![CDATA[ collectTime >= #{startTime} ]]> and <![CDATA[ collectTime <= #{endTime} ]]>  		order by xTime    </select>        <select id="getCmcChannelOfflineCmNumberPoints" parameterType="map"        resultType="com.topvision.platform.util.highcharts.domain.Point">        select         topCcmtsCmNumOutline y,		collectTime xTime		from perfcmccmnumberquality   		where cmcId = #{entityId} and channelIndex = #{channelIndex}  		and <![CDATA[ collectTime >= #{startTime} ]]> and <![CDATA[ collectTime <= #{endTime} ]]>  		order by xTime    </select>        <select id="getCmcOptLinkTempPoints" parameterType="map"        resultType="com.topvision.platform.util.highcharts.domain.Point">        select         optTemp y,		collectTime xTime		from perfcmclinkquality   		where cmcId = #{entityId}  		and <![CDATA[ collectTime >= #{startTime} ]]> and <![CDATA[ collectTime <= #{endTime} ]]>  		order by xTime    </select>        <select id="getCmcOptLinkTxPowerPoints" parameterType="map"        resultType="com.topvision.platform.util.highcharts.domain.Point">        select         optTxPower y,		collectTime xTime		from perfcmclinkquality   		where cmcId = #{entityId}  		and <![CDATA[ collectTime >= #{startTime} ]]> and <![CDATA[ collectTime <= #{endTime} ]]>  		order by xTime    </select>        <select id="getCmcOptLinkRxPowerPoints" parameterType="map"        resultType="com.topvision.platform.util.highcharts.domain.Point">        select         optRePower y,		collectTime xTime		from perfcmclinkquality   		where cmcId = #{entityId}  		and <![CDATA[ collectTime >= #{startTime} ]]> and <![CDATA[ collectTime <= #{endTime} ]]>  		order by xTime    </select>        <select id="getCmcOptLinkCurrentPoints" parameterType="map"        resultType="com.topvision.platform.util.highcharts.domain.Point">        select         optCurrent y,		collectTime xTime		from perfcmclinkquality   		where cmcId = #{entityId}  		and <![CDATA[ collectTime >= #{startTime} ]]> and <![CDATA[ collectTime <= #{endTime} ]]>  		order by xTime    </select>        <select id="getCmcOptLinkVoltagePoints" parameterType="map"        resultType="com.topvision.platform.util.highcharts.domain.Point">        select         optVoltage y,		collectTime xTime		from perfcmclinkquality   		where cmcId = #{entityId}  		and <![CDATA[ collectTime >= #{startTime} ]]> and <![CDATA[ collectTime <= #{endTime} ]]>  		order by xTime    </select>        <select id="getCmcUpLinkInFlowPoints" parameterType="map"        resultType="com.topvision.platform.util.highcharts.domain.Point">        select         channelInSpeed y,		collectTime xTime		from perfcmcflowquality   		where cmcId = #{entityId} and channelIndex = #{portIndex}  		and <![CDATA[ collectTime >= #{startTime} ]]> and <![CDATA[ collectTime <= #{endTime} ]]>  		order by xTime    </select>        <select id="getCmcUpLinkOutFlowPoints" parameterType="map"        resultType="com.topvision.platform.util.highcharts.domain.Point">        select         channelOutSpeed y,		collectTime xTime		from perfcmcflowquality   		where cmcId = #{entityId} and channelIndex = #{portIndex}  		and <![CDATA[ collectTime >= #{startTime} ]]> and <![CDATA[ collectTime <= #{endTime} ]]>  		order by xTime    </select>         <select id="getCmcUpLinkInUsedPoints" parameterType="map"        resultType="com.topvision.platform.util.highcharts.domain.Point">        select         (100*channelInSpeed/(portBandWidth*1000000)) y,		collectTime xTime		from perfcmcflowquality   		where cmcId = #{entityId} and channelIndex = #{portIndex}  		and <![CDATA[ collectTime >= #{startTime} ]]> and <![CDATA[ collectTime <= #{endTime} ]]>  		and <![CDATA[channelUtilization < 100 ]]>  		order by xTime    </select>        <select id="getCmcUpLinkOutUsedPoints" parameterType="map"        resultType="com.topvision.platform.util.highcharts.domain.Point">        select         (100*channelOutSpeed/(portBandWidth*1000000)) y,		collectTime xTime		from perfcmcflowquality   		where cmcId = #{entityId} and channelIndex = #{portIndex}  		and <![CDATA[ collectTime >= #{startTime} ]]> and <![CDATA[ collectTime <= #{endTime} ]]>  		and <![CDATA[channelUtilization < 100 ]]>  		order by xTime    </select>        <select id="getCmcChannelSpeedPoints" parameterType="map"        resultType="com.topvision.platform.util.highcharts.domain.Point">        select         (channelInSpeed+channelOutSpeed) y,		collectTime xTime		from perfcmcflowquality   		where cmcId = #{entityId} and channelIndex = #{channelIndex}  		and <![CDATA[ collectTime >= #{startTime} ]]> and <![CDATA[ collectTime <= #{endTime} ]]>  		order by xTime    </select>        <select id="getCmcChannelUsedPoints" parameterType="map"        resultType="com.topvision.platform.util.highcharts.domain.Point">        select         channelUtilization y,		collectTime xTime		from perfcmcflowquality   		where cmcId = #{entityId} and channelIndex = #{channelIndex}  		and <![CDATA[ collectTime >= #{startTime} ]]> and <![CDATA[ collectTime <= #{endTime} ]]>  		and <![CDATA[channelUtilization < 100 ]]>  		order by xTime    </select>        <select id="getCmcMacInFlowPoints" parameterType="map"        resultType="com.topvision.platform.util.highcharts.domain.Point">        select         channelInSpeed y,		collectTime xTime		from perfcmcflowquality   		where cmcId = #{entityId} and channelIndex = #{channelIndex}  		and <![CDATA[ collectTime >= #{startTime} ]]> and <![CDATA[ collectTime <= #{endTime} ]]>  		order by xTime    </select>        <select id="getCmcMacOutFlowPoints" parameterType="map"        resultType="com.topvision.platform.util.highcharts.domain.Point">        select         channelOutSpeed y,		collectTime xTime		from perfcmcflowquality   		where cmcId = #{entityId} and channelIndex = #{channelIndex}  		and <![CDATA[ collectTime >= #{startTime} ]]> and <![CDATA[ collectTime <= #{endTime} ]]>  		order by xTime    </select>        <select id="getCmcMacUsedPoints" parameterType="map"        resultType="com.topvision.platform.util.highcharts.domain.Point">        select        	(channelOutSpeed+channelInSpeed) y,		collectTime xTime		from perfcmcflowquality   		where cmcId = #{entityId} and channelIndex = #{channelIndex}  		and <![CDATA[ collectTime >= #{startTime} ]]> and <![CDATA[ collectTime <= #{endTime} ]]>  		and <![CDATA[channelUtilization < 100 ]]>  		order by xTime    </select>        <select id="getCmcUsTempPoints" parameterType="map"        resultType="com.topvision.platform.util.highcharts.domain.Point">        select         usTemp y,		collectTime xTime		from perfcmctempquality   		where cmcId = #{entityId}  		and <![CDATA[ collectTime >= #{startTime} ]]> and <![CDATA[ collectTime <= #{endTime} ]]>  		order by xTime    </select>        <select id="getCmcDsTempPoints" parameterType="map"        resultType="com.topvision.platform.util.highcharts.domain.Point">        select         dsTemp y,		collectTime xTime		from perfcmctempquality   		where cmcId = #{entityId}  		and <![CDATA[ collectTime >= #{startTime} ]]> and <![CDATA[ collectTime <= #{endTime} ]]>  		order by xTime    </select>        <select id="getCmcOutsideTempPoints" parameterType="map"        resultType="com.topvision.platform.util.highcharts.domain.Point">        select         outsideTemp y,		collectTime xTime		from perfcmctempquality   		where cmcId = #{entityId}  		and <![CDATA[ collectTime >= #{startTime} ]]> and <![CDATA[ collectTime <= #{endTime} ]]>  		order by xTime    </select>        <select id="getCmcInsideTempPoints" parameterType="map"        resultType="com.topvision.platform.util.highcharts.domain.Point">        select         insideTemp y,		collectTime xTime		from perfcmctempquality   		where cmcId = #{entityId}  		and <![CDATA[ collectTime >= #{startTime} ]]> and <![CDATA[ collectTime <= #{endTime} ]]>  		order by xTime    </select>        <select id="getCmcPowerTempPoints" parameterType="map"        resultType="cmcTempQualityFor8800B">        select         cmcId,        power1Temp topCcmtsSupply1TjTemperature,        power2Temp topCcmtsSupply2TjTemperature,        power3Temp topCcmtsSupply3TjTemperature,		collectTime		from perfcmctempquality   		where cmcId = #{entityId}  		and <![CDATA[ collectTime >= #{startTime} ]]> and <![CDATA[ collectTime <= #{endTime} ]]>  		order by collectTime    </select>        <select id="getCmcPortList" parameterType="long"        resultType="cmcPortAttribute">        select cmcId,ifSpeed,ifAdminStatus,ifOperStatus    		from cmcportattribute where cmcId = #{entityId}    </select>        <select id="getCmcRelayPerfPoints" parameterType="map"        resultType="point">  		select collectValue y,collectTime xTime from perfconnectivity  		where entityId = #{entityId}   		and <![CDATA[ collectTime >= #{startTime} ]]> and <![CDATA[ collectTime <= #{endTime} ]]>  		order by xTime    </select>         <select id="getCmcUpLinkPorts" parameterType="long"        resultType="cmcPhyConfig">  		select * from cmcsniphyconfig  		where cmcId = #{entityId}     </select>            <select id="getCmcCmTxAvgPoints" parameterType="map"        resultType="com.topvision.platform.util.highcharts.domain.Point">        select upTxAvg y,        collectTime xTime        from cmtsinfosummary        where cmcId = #{entityId}         and <![CDATA[ collectTime >= #{startTime} ]]> and <![CDATA[ collectTime <= #{endTime} ]]>        order by xTime    </select>        <select id="getCmcCmTxNotInRangePoints" parameterType="map"        resultType="com.topvision.platform.util.highcharts.domain.Point">        select upTxOutRange*100 y,        collectTime xTime from cmtsinfosummary        where cmcId = #{entityId}         and <![CDATA[ collectTime >= #{startTime} ]]> and <![CDATA[ collectTime <= #{endTime} ]]>        order by xTime    </select>        <select id="getCmcCmReAvgPoints" parameterType="map"        resultType="com.topvision.platform.util.highcharts.domain.Point">        select downReAvg y,        collectTime xTime  from cmtsinfosummary        where cmcId = #{entityId}         and <![CDATA[ collectTime >= #{startTime} ]]> and <![CDATA[ collectTime <= #{endTime} ]]>        order by xTime    </select>        <select id="getCmcCmReNotInRangePoints" parameterType="map"        resultType="com.topvision.platform.util.highcharts.domain.Point">        select downReOutRange*100 y,        collectTime xTime from cmtsinfosummary        where cmcId = #{entityId}         and <![CDATA[ collectTime >= #{startTime} ]]> and <![CDATA[ collectTime <= #{endTime} ]]>        order by xTime    </select>        <select id="getCmcUpSnrAvgPoints" parameterType="map"        resultType="com.topvision.platform.util.highcharts.domain.Point">        select upSnrAvg y,        collectTime xTime from cmtsinfosummary        where cmcId = #{entityId}         and <![CDATA[ collectTime >= #{startTime} ]]> and <![CDATA[ collectTime <= #{endTime} ]]>        order by xTime    </select>        <select id="getCmcUpSnrNotInRangePoints" parameterType="map"        resultType="com.topvision.platform.util.highcharts.domain.Point">        select upSnrOutRange*100 y,        collectTime xTime from cmtsinfosummary        where cmcId = #{entityId}         and <![CDATA[ collectTime >= #{startTime} ]]> and <![CDATA[ collectTime <= #{endTime} ]]>        order by xTime    </select>        <select id="getCmcDownSnrAvgPoints" parameterType="map"        resultType="com.topvision.platform.util.highcharts.domain.Point">        select downSnrAvg y,        collectTime xTime from cmtsinfosummary        where cmcId = #{entityId}         and <![CDATA[ collectTime >= #{startTime} ]]> and <![CDATA[ collectTime <= #{endTime} ]]>        order by xTime    </select>    <select id="getCmcDownSnrNotInRangePoints" parameterType="map"        resultType="com.topvision.platform.util.highcharts.domain.Point">        select downSnrOutRange*100 y,        collectTime xTime from cmtsinfosummary        where cmcId = #{entityId}         and <![CDATA[ collectTime >= #{startTime} ]]> and <![CDATA[ collectTime <= #{endTime} ]]>        order by xTime    </select>        <select id="getCmcOnlineNumPoints" parameterType="map"        resultType="com.topvision.platform.util.highcharts.domain.Point">        select onlineNum y,        time xTime from usernumhisccmts        where entityId = #{entityId}         and <![CDATA[ time >= #{startTime} ]]> and <![CDATA[ time <= #{endTime} ]]>        order by xTime    </select>        <select id="getCmcOnlineCmPoint" parameterType="map"        resultType="com.topvision.platform.util.highcharts.domain.Point">        select onlineNum y,        time xTime from usernumhisccmts        where entityId = #{entityId}         and ccIfIndex=#{cmcIndex}        and <![CDATA[ time >= #{startTime} ]]> and <![CDATA[ time <= #{endTime} ]]>        order by xTime    </select>        <select id="getCmcAllCmPoints" parameterType="map"        resultType="com.topvision.platform.util.highcharts.domain.Point">        select (onlineNum+otherNum+offlineNum) y,        time xTime from usernumhisccmts        where entityId = #{entityId}         and ccIfIndex=#{cmcIndex}        and <![CDATA[ time >= #{startTime} ]]> and <![CDATA[ time <= #{endTime} ]]>        order by xTime    </select>         <select id="getCmcDorOptTempPoints" parameterType="map"        resultType="com.topvision.platform.util.highcharts.domain.Point">        select         dorOptNodeTemp/10 y,		collectTime xTime		from perfCmcDorOptNodeTempquality   		where cmcId = #{entityId}  		and <![CDATA[ collectTime >= #{startTime} ]]> and <![CDATA[ collectTime <= #{endTime} ]]>  		order by xTime    </select>               <select id="getCmcOptVoltagePoints" parameterType="map"        resultType="com.topvision.platform.util.highcharts.domain.Point">        select         dorLinePower/10 as y,        collectTime as xTime		from perfcmcdorlinepowerquality  		where cmcId = #{entityId}  		and <![CDATA[ collectTime >= #{startTime} ]]> and <![CDATA[ collectTime <= #{endTime} ]]>  		order by xTime    </select></mapper>