<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"><mapper namespace="com.topvision.ems.cmc.loadbalance.domain.CmcLoadBalPolicyTpl"><!--     <typeAlias alias="cmcLoadBalPolicyTpl" type="com.topvision.ems.cmc.domain.CmcLoadBalPolicyTpl" />    <typeAlias alias="cmcLoadBalBasicRuleTpl" type="com.topvision.ems.cmc.domain.CmcLoadBalBasicRuleTpl" /> -->    <select id="selectLoadBalPolicyTpl" resultType="cmcLoadBalPolicyTpl">        select policyTplId,policyName from docsloadbalpolicytpl    </select>        <select id="selectLoadBalPolicyTplById" resultType="cmcLoadBalPolicyTpl" parameterType="long">        select policyTplId,policyName from docsloadbalpolicytpl where policyTplId=#{value}    </select>        <select id="selectLoadBalBasicRuleTplByPolicy" resultType="cmcLoadBalBasicRuleTpl" parameterType="long">        select a.ruleTplId,a.docsLoadBalBasicRuleEnable,a.docsLoadBalBasicRuleDisStart,a.docsLoadBalBasicRuleDisPeriod         from docsloadbalbasicruletpl a,policyruletplref b         where a.ruleTplId=b.ruleTplId and b.policyTplId=#{value}    </select>        <insert id="insertPolicyRuleTplRef" parameterType="map">        insert into policyruletplref(ruleTplId,policyTplId)         values(#{ruleTplId},#{policyTplId})    </insert>        <update id="updateLoadBalPolicyTpl" parameterType="cmcLoadBalPolicyTpl">        update docsloadbalpolicytpl set policyName=#{policyName} where policyTplId=#{policyTplId}    </update>        <delete id="deleteRuleTplByPolicyTplId" parameterType="long">        delete from docsloadbalbasicruletpl where ruleTplId in (select ruleTplId from policyruletplref where policyTplId=#{value})    </delete>        <delete id="deletePolicyTplById" parameterType="long">        delete from docsloadbalpolicytpl where policyTplId=#{value}    </delete>        <insert id="insertLoadBalPolicyTpl" parameterType="cmcLoadBalPolicyTpl">        insert into docsloadbalpolicytpl(policyTplId,policyName) values(#{policyTplId},#{policyName})        <selectKey resultType="long" keyProperty="policyTplId">            SELECT @@IDENTITY AS policyTplId        </selectKey>    </insert>        <insert id="insertLoadBalBasicRuleTpl" parameterType="cmcLoadBalBasicRuleTpl">        insert into docsloadbalbasicruletpl(ruleTplId,docsLoadBalBasicRuleEnable,docsLoadBalBasicRuleDisStart,docsLoadBalBasicRuleDisPeriod)         values(#{ruleTplId},#{docsLoadBalBasicRuleEnable},#{docsLoadBalBasicRuleDisStart},#{docsLoadBalBasicRuleDisPeriod})        <selectKey resultType="long" keyProperty="ruleTplId">            SELECT @@IDENTITY AS ruleTplId        </selectKey>    </insert></mapper>