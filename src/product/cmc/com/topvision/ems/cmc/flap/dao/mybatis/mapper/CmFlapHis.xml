<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"><mapper namespace="com.topvision.ems.cmc.flap.domain.CmFlapHis">	<select id="getCmIdByMap" parameterType="map" resultType="long">        select cmId from cmccmrelation where        cmcId=#{cmcId} and maclong=#{maclong}    </select>    	<select id="selectOneCmFlapHisByTime" parameterType="map"		resultType="cmFlapHis">		select cmId,cmcId,cmMac,collectTime,lastFlapTime,insFailNum,increaseInsNum,hitNum,missNum,increaseHitPercent,crcErrorNum,powerAdjLowerNum,powerAdjHigherNum,increasePowerAdjNum from 		cmflaphis 		where cmMac = #{cmMac} and collectTime between  #{startTime} and #{endTime} 		order by collectTime	</select>		<select id="getLastCmFlapByCmId" parameterType="long"		resultType="cmFlap">		select		lastFlapTime as topCmFlapLastFlapTime,		topCmFlapInsertionFailNum,		hitNum as topCmFlapHitNum,		missNum as		topCmFlapMissNum,		crcErrorNum as		topCmFlapCrcErrorNum,		powerAdjLowerNum		as topCmFlapPowerAdjLowerNum,		powerAdjHigherNum as		topCmFlapPowerAdjHigherNum		from cmflap		where cmId =#{cmId}	</select>	<!-- ################################## select end ######################################### -->		<insert id="insertCmFlapHis" parameterType="cmFlapHis">		insert into cmflaphis		(cmId,cmcId,cmMac,collectTime,lastFlapTime,insFailNum,increaseInsNum,hitNum,missNum,increaseHitPercent,crcErrorNum,powerAdjLowerNum,powerAdjHigherNum,increasePowerAdjNum)		values		(#{cmId},#{cmcId},#{cmMac},#{collectTime},#{lastFlapTime},#{insFailNum},#{increaseInsNum},#{hitNum},#{missNum},#{increaseHitPercent},#{crcErrorNum},#{powerAdjLowerNum},#{powerAdjHigherNum},#{increasePowerAdjNum})	</insert>	<delete id="deleteCmFlapByCmcId" parameterType="map">		DELETE FROM		CmFlap		WHERE cmcId in		(select cmcId from		cmcentityrelation where		cmcEntityId = #{entityId})	</delete>		<select id="getCmAttributeByCmMac" parameterType="map"		resultType="cmAttribute">		select a.cmcId,a.cmId		from cmattribute a,		cmccmrelation b		where		a.cmId=b.cmId AND a.StatusMacAddress =#{cmMac}		and entityId =		#{entityId}	</select>		<select id="getCmFlapByCmMac" parameterType="map" resultType="long">		select a.cmId		from cmflap a, cmccmrelation b		where a.cmId=b.cmId AND		topCmFlapMacAddr =#{cmMac} AND entityId=#{entityId}	</select>		<update id="updateCmFlap" parameterType="cmFlap">		Update cmflap		set		lastFlapTime =		#{topCmFlapLastFlapTime},		topCmFlapInsertionFailNum =		#{topCmFlapInsertionFailNum},		hitNum =		#{topCmFlapHitNum},		missNum =		#{topCmFlapMissNum},		crcErrorNum =		#{topCmFlapCrcErrorNum},		powerAdjLowerNum =		#{topCmFlapPowerAdjLowerNum},		powerAdjHigherNum =		#{topCmFlapPowerAdjHigherNum},		dt =		#{dt}		where cmId =		#{cmId}	</update>		<insert id="insertCmFlap" parameterType="cmFlap">		INSERT INTO		cmflap		(cmcId,		cmId,		topCmFlapMacAddr,		topCmFlapInsertionFailNum,		lastFlapTime,		hitNum,		missNum,		crcErrorNum,		powerAdjLowerNum,		powerAdjHigherNum,		dt)		VALUES		(#{cmcId},		#{cmId},		#{topCmFlagMacAddrString},		#{topCmFlapInsertionFailNum},		#{topCmFlapLastFlapTime},		#{topCmFlapHitNum},		#{topCmFlapMissNum},		#{topCmFlapCrcErrorNum},		#{topCmFlapPowerAdjLowerNum},		#{topCmFlapPowerAdjHigherNum},		#{dt})	</insert></mapper>