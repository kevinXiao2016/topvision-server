<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"><mapper namespace="com.topvision.ems.cmc.ipqam.domain.Ipqam">	<select id="selectEqamList" parameterType="long" resultType="ipqam">		select		a.cmcId,a.portId,b.ifIndex,b.ifDescr,a.ifOperStatus, a.qamChannelFrequency,		a.qamChannelModulationFormat,a.qamChannelPower,a.qamChannelSquelch,a.qamChannelContWaveMode,		a.qamChannelAnnexMode, a.qamChannelCommonOutputBw,		a.qamChannelCommonUtilization, a.qamChannelSymbolRate,a.qamChannelInterleaverMode		FROM		CmcEqamStatus a		left join cmcportattribute b on a.portId = b.cmcPortId		WHERE a.cmcId = #{cmcId}	</select>	<select id="selectProgramList" parameterType="map" resultType="program">		select a.mpegInputUdpOriginationSrcInetAddr,		a.sessionId,		a.mpegInputUdpOriginationDestInetAddr,		a.mpegInputUdpOriginationDestPort,		a.mpegInputUdpOriginationActive, a.mpegInputUdpOriginationPacketsDetected,		b.mpegVideoSessionIndex,b.mpegVideoSessionBitRate,b.mpegVideoSessionID,		c.mpegOutputProgNo, c.mpegOutputProgPmtVersion, c.mpegOutputProgPmtPid,		c.mpegOutputProgPcrPid,		c.mpegOutputProgNumElems,		d.ifIndex  from ProgramIn a		left join cmceqamprogram b on a.cmcId = b.cmcId and		a.mpegInputUdpOriginationIndex = b.mpegVideoSessionIndex		left join programout c on a.cmcId = c.cmcId and a.portId = c.portId and		a.sessionId = c.sessionId		left join cmcportattribute d on a.portId = d.cmcPortId		WHERE 1 = 1 and a.cmcId = #{cmcId}		<if test="sort != null and dir != null">		<choose>          <when test="sort == 'sessionId' or sort == 'mpegInputUdpOriginationDestPort' or sort == 'mpegInputUdpOriginationPacketsDetected' or sort == 'mpegInputUdpOriginationActive' or sort == 'mpegInputUdpOriginationSrcInetAddr' or sort == 'mpegInputUdpOriginationDestInetAddr'">              ORDER BY a.${sort} ${dir}          </when>          <when test="sort == 'mpegOutputProgNo' or sort == 'mpegOutputProgPmtVersion' or sort == 'mpegOutputProgPmtPid' or sort == 'mpegOutputProgPcrPid' or sort == 'mpegOutputProgNumElems'">              ORDER BY c.${sort} ${dir}          </when>          <when test="sort == 'mpegVideoSessionBitRate'">              ORDER BY b.${sort} ${dir}          </when>          <otherwise>              ORDER BY a.mpegInputUdpOriginationPacketsDetected ASC, b.mpegVideoSessionBitRate DESC          </otherwise>        </choose>        </if>        limit ${start} , ${limit}	</select>	<select id="selectProgramListCount" parameterType="long"		resultType="long">		select		count(*)		from ProgramIn a		left join cmceqamprogram b on a.cmcId = b.cmcId and		a.mpegInputUdpOriginationIndex = b.mpegVideoSessionIndex		left join programout c on a.cmcId = c.cmcId and a.portId = c.portId and		a.sessionId = c.sessionId		left join cmcportattribute d on a.portId = d.cmcPortId		WHERE 1 = 1 and a.cmcId = #{cmcId}	</select>		<select id="selectOltProgramList" parameterType="map" resultType="program">		select 			a.mpegInputUdpOriginationSrcInetAddr,			a.sessionId,			a.mpegInputUdpOriginationDestInetAddr,			a.mpegInputUdpOriginationDestPort,			a.mpegInputUdpOriginationActive, 			a.mpegInputUdpOriginationPacketsDetected,			b.mpegVideoSessionIndex,			b.mpegVideoSessionBitRate,			b.mpegVideoSessionID,			c.mpegOutputProgNo, 			c.mpegOutputProgPmtVersion, 			c.mpegOutputProgPmtPid,			c.mpegOutputProgPcrPid,			c.mpegOutputProgNumElems,			d.ifIndex,			E.name cmtsName		from 			ProgramIn a		left join cmceqamprogram b on a.cmcId = b.cmcId and a.mpegInputUdpOriginationIndex = b.mpegVideoSessionIndex		left join programout c on a.cmcId = c.cmcId and a.portId = c.portId and a.sessionId = c.sessionId		left join cmcportattribute d on a.portId = d.cmcPortId		LEFT JOIN entity E ON d.cmcId = E.entityId		WHERE a.cmcId IN (SELECT entityId from entity where parentId = #{entityId})		<if test="queryContent != null">		AND (		   a.mpegInputUdpOriginationDestInetAddr LIKE '%${queryContent}%'		OR a.mpegInputUdpOriginationSrcInetAddr LIKE '%${queryContent}%'		OR c.mpegOutputProgNo LIKE '%${queryContent}%'		OR E.name LIKE '%${queryContent}%'		)		</if>		<if test="sort != null and dir != null">		<choose>          <when test="sort == 'sessionId' or sort == 'mpegInputUdpOriginationDestPort' or sort == 'mpegInputUdpOriginationPacketsDetected' or sort == 'mpegInputUdpOriginationActive' or sort == 'mpegInputUdpOriginationSrcInetAddr' or sort == 'mpegInputUdpOriginationDestInetAddr'">              ORDER BY a.${sort} ${dir}          </when>          <when test="sort == 'mpegOutputProgNo' or sort == 'mpegOutputProgPmtVersion' or sort == 'mpegOutputProgPmtPid' or sort == 'mpegOutputProgPcrPid' or sort == 'mpegOutputProgNumElems'">              ORDER BY c.${sort} ${dir}          </when>          <when test="sort == 'mpegVideoSessionBitRate'">              ORDER BY b.${sort} ${dir}          </when>          <otherwise>              ORDER BY a.mpegInputUdpOriginationPacketsDetected ASC, b.mpegVideoSessionBitRate DESC          </otherwise>        </choose>        </if>        limit ${start} , ${limit}	</select>		<select id="selectOltEqamListCount" parameterType="map" resultType="long">		select			count(*)		from ProgramIn a		left join cmceqamprogram b on a.cmcId = b.cmcId and a.mpegInputUdpOriginationIndex = b.mpegVideoSessionIndex		left join programout c on a.cmcId = c.cmcId and a.portId = c.portId and a.sessionId = c.sessionId		left join cmcportattribute d on a.portId = d.cmcPortId		LEFT JOIN entity E ON d.cmcId = E.entityId		WHERE a.cmcId IN (SELECT entityId from entity where parentId = #{entityId})		<if test="queryContent != null">		AND (		   a.mpegInputUdpOriginationDestInetAddr LIKE '%${queryContent}%'		OR a.mpegInputUdpOriginationSrcInetAddr LIKE '%${queryContent}%'		OR c.mpegOutputProgNo LIKE '%${queryContent}%'		OR E.name LIKE '%${queryContent}%'		)		</if>	</select>		<select id="selectEqamSupportCountUnderOlt" parameterType="long" resultType="int">		SELECT count(*) 		FROM cmcattribute A, entity B		WHERE A.topCcmtsEqamSupport = 1 AND A.cmcId=B.entityId AND B.parentId=#{entityId}	</select>		<select id="selectEqamSupport" parameterType="long" resultType="int">		SELECT topCcmtsEqamSupport 		FROM cmcattribute A		WHERE A.cmcId=#{entityId}	</select></mapper>