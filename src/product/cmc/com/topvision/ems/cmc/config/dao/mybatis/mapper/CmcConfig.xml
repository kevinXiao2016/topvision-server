<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"><mapper namespace="com.topvision.ems.cmc.config.facade.domain.CmcConfig">	<!-- ################################## select start ####################################### -->	<select id="getCmcSnmpCommunityTable" parameterType="long"		resultType="cmcSnmpCommunityTable">		select readCommunity, writeCommunity from cmcSnmpConfig where entityId =		#{entityId}    </select>    <select id="selectCmcSysConfig" parameterType="long"        resultType="cmcSysConfig">        select             cmcId, topCcmtsSysCfgPiggyback         from             cmcsyscfg         where             cmcId=#{cmcId}    </select>    <select id="getCmcBasicInfo" parameterType="long" resultType="cmcSystemBasicInfo">        select cmcId,        topCcmtsSysDescr,        topCcmtsSysContact,        topCcmtsSysName,        ifnull(nmname, topCcmtsSysName) nmname,        topCcmtsSysLocation        from cmcattribute        where cmcId = #{cmcId}    </select>    <select id="getCmcIpInfo" parameterType="long" resultType="cmcSystemIpInfo">        select entityId,        topCcmtsEthIpAddr,        topCcmtsEthIpMask,        topCcmtsEthGateway        from cmcSystemIpInfo        where entityId = #{entityId}    </select>    <select id="getCmcEmsList" parameterType="long" resultType="cmcEmsConfig">        select cmcId,        docsDevNmAccessIndex,        docsDevNmAccessIp,        docsDevNmAccessIpMask,        docsDevNmAccessReadCommunity,        docsDevNmAccessControl,        docsDevNmAccessWriteCommunity        from cmcEmsConfig        where cmcId = #{cmcId}    </select>    <select id="getDevEvControlList" parameterType="long"        resultType="docsDevEvControl">        select entityId,        docsDevEvPriority,        docsDevEvReporting        from devevcontrol        where entityId = #{entityId}    </select>    <select id="getCmcVlanPrimaryIpByCmcId" parameterType="Long"        resultType="cmcVlanPrimaryIp">        SELECT        vlanAutoId,        cmcId,        topCcmtsVifPriIpVlanId,        topCcmtsVifPriIpAddr,        topCcmtsVifPriIpMask,        topCcmtsVifPriIpStatus        FROM        cmcVlanPriIpmanage        WHERE        cmcId=#{cmcId}    </select>    <select id="getCmcDhcpBaseConfigByEntityId" parameterType="Long"        resultType="cmcDhcpBaseConfig">        SELECT        entityId,        cableSourceVerify,        topCcmtsDhcpAlloc,        topCcmtsDhcpMode,        topCcmtsDhcpAllocOption60        FROM        cmcDhcpBaseConfig        WHERE        entityId=#{entityId}    </select>    <select id="getCC8800BCcPrimaryVlanAsSnmpByCmcIdAndVlanId"        parameterType="map" resultType="cmcPrimaryVlan">        SELECT        vlanAutoId,        cmcId,        topCcmtsVifPriIpVlanId AS vlanId,        topCcmtsVifPriIpAddr AS priIpAddr,        topCcmtsVifPriIpMask AS priIpMask,        topCcmtsVifPriIpStatus        FROM        cmcVlanPriIpmanage        WHERE        cmcId=#{cmcId} AND topCcmtsVifPriIpVlanId=#{vlanId}    </select>    <select id="getCC8800BVlanPriIpByCmcIdAndVId" parameterType="map"        resultType="cmcVlanPrimaryIp">        SELECT        vlanAutoId,        cmcId,        topCcmtsVifPriIpVlanId,        topCcmtsVifPriIpAddr,        topCcmtsVifPriIpMask,        topCcmtsVifPriIpStatus        FROM        cmcVlanPriIpmanage        WHERE        cmcId=#{cmcId} AND topCcmtsVifPriIpVlanId=#{vlanId}    </select>    <select id="getCC8800BSniConfig" parameterType="long"        resultType="ccmtsSniObject">        SELECT        topCcmtsSniEthInt,        topCcmtsSniMainInt,        topCcmtsSniBackupInt        FROM        cmc8800BSniConfig        WHERE        cmcId=#{cmcId}    </select>        <select id="getCmcVlanPriInterfaceByCmcId" parameterType="Long"		resultType="cmcVlanPrimaryInterface">		SELECT		cmcId,		vlanPrimaryInterface,		vlanPrimaryDefaultRoute,		vlanPrimaryDefaultIpAddr,		vlanPrimaryDefaultIpMask		FROM		CmcVlanPrimaryInterface		WHERE		cmcId=#{cmcId}	</select>    <!-- ################################## select end ######################################### -->    <!-- ################################## insert start ####################################### -->    <insert id="insertCmcEmsConfig" parameterType="cmcEmsConfig">        insert into        cmcemsconfig        (cmcId, docsDevNmAccessIndex, docsDevNmAccessIp,        docsDevNmAccessIpMask,        docsDevNmAccessReadCommunity,        docsDevNmAccessWriteCommunity,        docsDevNmAccessControl        )        values        (#{cmcId},        #{docsDevNmAccessIndex}, #{topCcmtsNmAccessIp},        #{topCcmtsNmAccessIpMask},        #{topCcmtsNmAccessReadCommunity},        #{topCcmtsNmAccessWriteCommunity},        #{topCcmtsNmAccessControl}        )    </insert>    <insert id="insertDevEvControl" parameterType="docsDevEvControl">        insert into        devevcontrol        (entityId,        docsDevEvPriority,        docsDevEvReporting        )        values        (#{entityId},        #{docsDevEvPriority},        #{docsDevEvReporting}        )    </insert>	<!-- ################################## select end ######################################### -->	<!-- ################################## insert start ####################################### -->	<insert id="insertCmcSysConfig" parameterType="cmcSysConfig">		insert into		cmcsyscfg		(cmcId, topCcmtsSysCfgPiggyback)		values		(#{cmcId},		#{topCcmtsSysCfgPiggyback})	</insert>	<insert id="insertCmcVlanPriInterface" parameterType="cmcVlanPrimaryInterface">		INSERT INTO		CmcVlanPrimaryInterface(cmcId,vlanPrimaryInterface,vlanPrimaryDefaultRoute,		vlanPrimaryDefaultIpAddr,		vlanPrimaryDefaultIpMask)		VALUES(#{cmcId},#{vlanPrimaryInterface},#{vlanPrimaryDefaultRoute},#{vlanPrimaryDefaultIpAddr},		#{vlanPrimaryDefaultIpMask})	</insert>	<insert id="insertCmcVlanPrimaryIp" parameterType="cmcVlanPrimaryIp">		INSERT		INTO		cmcVlanPriIpmanage		(		vlanAutoId,		cmcId,		topCcmtsVifPriIpVlanId,		topCcmtsVifPriIpAddr,		topCcmtsVifPriIpMask,		topCcmtsVifPriIpStatus)		VALUES(		#{vlanAutoId},		#{cmcId},		#{topCcmtsVifPriIpVlanId},		#{topCcmtsVifPriIpAddr},		#{topCcmtsVifPriIpMask},		#{topCcmtsVifPriIpStatus})	</insert>	<!-- ################################## insert end ######################################### -->	<!-- ################################## update start ####################################### -->	<update id="updateCC8800BSnmpInfo" parameterType="cmcSnmpCommunityTable">		update cmcSnmpConfig		set readCommunity = #{readCommunity}, writeCommunity = #{writeCommunity}		where entityId = #{entityId}    </update>    <update id="updateCC8800BCcPrimaryVlan" parameterType="cmcVlanPrimaryIp">        update        cmcVlanPriIpmanage        set        topCcmtsVifPriIpAddr = #{topCcmtsVifPriIpAddr},        topCcmtsVifPriIpMask = #{topCcmtsVifPriIpMask}        where cmcId = #{cmcId} AND topCcmtsVifPriIpVlanId = #{topCcmtsVifPriIpVlanId}    </update>    <update id="updateCmcConfigBasicInfo" parameterType="map">        update cmcattribute        set topCcmtsSysContact = #{cmcContact},        topCcmtsSysName = #{cmcName},        topCcmtsSysLocation = #{location}        where cmcId = #{cmcId}    </update>    <update id="updateCmcConfigIpInfo" parameterType="cmcSystemIpInfo">        update cmcSystemIpInfo        set topCcmtsEthIpAddr = #{topCcmtsEthIpAddr},        topCcmtsEthIpMask = #{topCcmtsEthIpMask}        where entityId = #{entityId}    </update>    <update id="updateCmcConfigGateway" parameterType="cmcSystemIpInfo">        update cmcSystemIpInfo        set        topCcmtsEthGateway = #{topCcmtsEthGateway}        where entityId = #{entityId}    </update>    <update id="modifyPhysicalInterfacePreferredMode"        parameterType="map">        update cmcextattributeb set extMangPhyMainInt=#{topCcmtsSniEthInt} where        cmcid=(select cmcid        from cmcentityrelation where cmcEntityId=#{cmcEntityId})    </update>    <update id="modifyMainTransmissionMode" parameterType="map">        update cmcextattributeb set extMangPhySelModel=#{topCcmtsSniMainInt} where        cmcid=(select cmcid        from cmcentityrelation where cmcEntityId=#{cmcEntityId})    </update>    <update id="modifyBackupTransmissionMode" parameterType="map">        update cmcextattributeb set extMangPhyBackupInt=#{topCcmtsSniBackupInt} where        cmcid=(select cmcid        from cmcentityrelation where cmcEntityId=#{cmcEntityId})    </update>    <update id="modifyCmcEmsConfig" parameterType="cmcEmsConfig">        update cmcemsconfig        set docsDevNmAccessIp=#{topCcmtsNmAccessIp},        docsDevNmAccessIpMask=#{topCcmtsNmAccessIpMask},        docsDevNmAccessReadCommunity=#{topCcmtsNmAccessReadCommunity},        docsDevNmAccessWriteCommunity=#{topCcmtsNmAccessWriteCommunity},        docsDevNmAccessControl=#{topCcmtsNmAccessControl}        where cmcId = #{cmcId} and docsDevNmAccessIndex = #{docsDevNmAccessIndex}    </update>    <update id="modifyDevEvControl" parameterType="docsDevEvControl">        update devevcontrol        set docsDevEvReporting=#{docsDevEvReporting}        where entityId = #{entityId} and docsDevEvPriority = #{docsDevEvPriority}    </update>    <update id="updateCC8800BSniConfig" parameterType="ccmtsSniObject">        UPDATE        cmc8800BSniConfig        SET        topCcmtsSniEthInt=#{topCcmtsSniEthInt},        topCcmtsSniMainInt=#{topCcmtsSniMainInt},        topCcmtsSniBackupInt=#{topCcmtsSniBackupInt}        WHERE cmcId=#{cmcId}    </update>    <update id="updateCmcVlanPriInterfaceByCmcId" parameterType="cmcVlanPrimaryInterface">		UPDATE		CmcVlanPrimaryInterface		SET		vlanPrimaryInterface=#{vlanPrimaryInterface},		vlanPrimaryDefaultRoute=#{vlanPrimaryDefaultRoute},		vlanPrimaryDefaultIpAddr=#{vlanPrimaryDefaultIpAddr},		vlanPrimaryDefaultIpMask=#{vlanPrimaryDefaultIpMask}		WHERE		cmcId=#{cmcId}	</update>	<!-- ################################## update end ######################################### -->	<!-- ################################## delete start ####################################### -->	<delete id="deleteCmcSysConfig" parameterType="long">		delete from		cmcsyscfg where cmcId=#{cmcId}	</delete>	<delete id="deleteCmcVlanPrimaryIpByCmcId" parameterType="long">		delete		from		cmcVlanPriIpmanage where cmcid=#{cmcId}	</delete>	<!-- ################################## delete end ######################################### --></mapper>